<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @*<META HTTP-EQUIV=”refresh” CONTENT=”5; URL=https://vendtechsl.com/Home/Index”>*@
    <link rel="shortcut icon" href="~/Content/images/vt_logo.PNG">
    <title>User Panel</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,400italic,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Raleway:100' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>


    <link href="~/Content/userStyle.css" rel="stylesheet" />
    <link href="~/Content/assets/css/style.min.css" rel="stylesheet" />
    <link href="~/Content/style.css" rel="stylesheet" />

    @Styles.Render("~/Content/adminLayoutCSS")
    @RenderSection("styles", required: false)
    @Scripts.Render("~/bundles/modernizr")


    <style>
        .modal-body123 {
            background-color: #f8f9fa; /* Set your desired background color */
            color: #343a40; /* Set your desired text color */
            padding: 20px; /* Set your desired padding */
        }

            /* Additional styles for specific elements inside modal body if needed */
            .modal-body123 p {
                margin-bottom: 10px;
            }

            /* Example: Style links inside modal body */
            .modal-body123 a {
                color: #007bff; /* Set your desired link color */
                text-decoration: underline;
            }
    </style>

</head>
<body>
    <header>
        @Html.Partial("_Header")
    </header>
    @{ var user = (UserDetails)ViewBag.LOGGEDIN_USER; }
<section id="cl-wrapper" class="fixed-menu content">
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel" >
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">SESSION TIMEOUT</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
                </div>
                <div class="modal-body123">
                    <p>Your session is about to expire.</p>
                    <p>Do you want to stay logged in?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="maintainSession()" data-dismiss="modal">STAY</button>
                    <a href="@Url.Action("SignOut", "Home")" class="btn " style="background:yellow">LOGOUT</a>
                </div>
            </div>
        </div>
    </div>
    @Html.Partial("_SideBaar")

    @if (user.UserType == UserRoles.AppUser)
    {
        if (user.IsEmailVerified)
        {
            @RenderBody();
        }
    }
    else
    {
        <div><H1>Access denied! You do not have permission to access this corner</H1></div>
    }

</section>

    <footer>
        <style>
            nopadding {
                margin-right: 0px;
                padding-right: 0px;
            }
        </style>

        <div class="social row col-md-6 col-sm-12 col-xs-12 pull-right  content">
            <div class="col-md-3 "> <a href="@Url.Action("TermsAndConditions", "Home")" style="text-align:right !important; ">Terms And Conditions</a></div>
            <div class="col-md-1 "><span style="color:white;"> | </span> </div>
            <div class="col-md-2 "><a href="@Url.Action("PrivacyPolicy", "Home")" style="text-align:right;">Privacy Policy </a></div>
            <div class="col-md-1 "> <span style="color:white;"> |</span> </div>
            <div class="col-md-4 "><span style="color:white;">Vendtech SL. LTD &copy @DateTime.UtcNow.Year</span></div>

        </div>
    </footer>
    @Scripts.Render("~/bundles/jquery")
    <script src="~/Scripts/bootstrap.min.js"></script>
    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/extendedjs")
    @Scripts.Render("~/bundles/themeSpecific")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/custom")
    @RenderSection("scripts", required: false)

    <script>
        function openCloseMobileSideBar() {
            
            if ($('.show_cl-sidebar')[0]) {
                $('.cl-sidebar').removeClass('show_cl-sidebar')
            } else {
                $('.cl-sidebar').addClass('show_cl-sidebar')
            }
        }
        $(function () {
            setInterval(function () {

                $.ajax({
                    url: '/Home/AutoLogout',
                    success: function (data) {

                        if (data.Message == "aboutTo") {
                            $("#logoutModal").modal('show');
                        }
                        if (data.Message == "expired") {
                            window.location.href = '/Home/Index'
                        }
                    }
                })
            }, 10000);
        })

        function maintainSession() {
            $.ajax({
                url: '/Home/MaintainSession',
                success: function (data) {
                    console.log('data', data)
                }
            })
        }

        function toggleOpenClass() {
            var element = document.getElementById('profile_menu');
            element.classList.toggle('open');
        }


     
    </script>

</body>
</html>