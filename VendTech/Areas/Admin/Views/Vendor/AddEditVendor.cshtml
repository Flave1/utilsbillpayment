@model SaveVendorModel
@{
    ViewBag.Title = Model.VendorId > 0 ? "Edit Vendor Details" : "Add Vendor Details";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayOut.cshtml";
}

<div class="container-fluid" id="pcont">
    <div class="page-head">
        <h2>@ViewBag.Title</h2>
    </div>

    <style>
        .field1{
            width:60%; 
        }
        label{
            float:left;
        }
    </style>
    <div class="cl-mcont">
        @Html.Partial("_FunctionCallMessage")
        <div class="row">
            <div class="col-md-12">
                <div class="block-flat">
                    <div class="header">
                        <h3>@ViewBag.Title</h3>
                    </div>
                    <div class="content people-form-cs">
                        <form class="form-horizontal" role="form" id="UserForm">
                            @Html.HiddenFor(x => x.VendorId)

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3">VENDOR NAME <em>* </em></label>
                                        @Html.TextBoxFor(x => x.Vendor, new { @class = "form-control  field1" })
                                        @Html.ValidationMessageFor(x => x.Vendor)
                                    </div>

                                </div>
                                <div class="col-md-6">
                                    <div class=" row ">
                                        <label for="inputEmail3" class="col-md-3">REP FIRST NAME<em>*</em></label>
                                        @Html.TextBoxFor(x => x.Name, new { @class = "form-control field1" })
                                        @Html.ValidationMessageFor(x => x.Name)
                                        </div>
                                    </div> 
                             </div>

                            <div class="row">
                                <div class=" col-md-6">
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3 ">REP LAST NAME<em>*</em></label>
                                        @Html.TextBoxFor(x => x.SurName, new { @class = "form-control field1" })
                                        @Html.ValidationMessageFor(x => x.SurName)
                                    </div>
                                </div>
                                <div class="col-md-6"> 
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3 ">VENDOR EMAIL</label>
                                        @Html.TextBoxFor(x => x.Email, new { @class = "form-control field1" })
                                        @Html.ValidationMessageFor(x => x.Email)
                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="address" class="col-md-3 ">VENDOR ADDRESS</label>
                                        @Html.TextBoxFor(x => x.Address, new { @class = "form-control field1" })
                                        @Html.ValidationMessageFor(x => x.Email)
                                    </div>
                                </div>
                                <div class=" col-md-6">
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3">AGENCY NAME</label>
                                        @Html.DropDownListFor(x => x.AgencyId, new SelectList(ViewBag.Agents, "value", "text"), null, new { @class = "form-control field1" })
                                        @Html.ValidationMessageFor(x => x.AgencyId)
                                    </div>
                                </div>
                               
                            </div>
                         

                            <div class="row"> 
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3">Country</label>
                                        <select class="form-control field1" name="Country" id="Country">
                                            <option value="">Select Country</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3">Country</label>
                                        <select id="City" name="City" class="form-control field1">
                                            <option value="">Select City</option>
                                        </select>
                                    </div>
                                </div>



                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3">PASSWORD<em>*</em></label>
                                        @Html.PasswordFor(x => x.Password, new { @class = "form-control field1" })
                                        @Html.ValidationMessageFor(x => x.Password)
                                    </div>
                                </div>
                                <div class=" col-md-6"> 
                                    <div class="row">
                                        <label for="inputEmail3" class="col-md-3 ">RETYPE PASSWORD<em>*</em></label>
                                        @Html.PasswordFor(x => x.ConfirmPassword, new { @class = "form-control field1" })
                                        @Html.ValidationMessageFor(x => x.ConfirmPassword)
                                    </div>
                                </div>
                            </div>
 
                            <div class="row">
                                <div class=" col-md-6">
                                    <label for="inputEmail3" class="col-md-3">CELL PHONE<em>*</em></label>
                                    <div class="col-md-2">
                                        <select name="CountryCode" class="form-control">
                                            <option value="+232">+232</option>
                                        </select>
                                    </div>
                                    @Html.TextBoxFor(x => x.Phone, new { @class = "form-control field1" })
                                    @Html.ValidationMessageFor(x => x.Phone)
                                </div>
                                <div class=" col-md-6">
                                    <div class="col-sm-offset-4 col-sm-8">
                                        <a href="@Url.Action("ManageVendors", "Vendor", new { area = "Admin" })" class="btn btn-default">Cancel</a>
                                        <input type="button" class="btn btn-primary" id="addUserBtn" value="Submit" />
                                    </div>
                                </div>

                            </div>

 
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
<script src="~/Scripts/AdminScripts/vendor.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            App.init();
            if ('@Model.VendorId' !='0') {
                $("#Password").val('@Model.Password');
                $("#ConfirmPassword").val('@Model.Password');
            }

              $("#Country").change(onCountryChange);  
              onCountryChange();
              loadAllCountries();

            $("input[type=button]#saveProfileBtn").live("click", function () {
                return UpdateProfile($(this));
            }); 
        });


    
        function loadAllCountries() {
            var array = @Html.Raw(Json.Encode(ViewBag.countries));
            if (array.length > 0)
            { 
                        for (var i = 0; i < array.length; i++) {
                            $("#Country").append("<option value="+array[i].Value+">"+array[i].Text+" </option>")
                        } 
            }
        }

        function onCountryChange() {
            $("#City").empty();
            $("#City").append("<option value=''> Select City </option>") 
                var val = $("#Country").val();
                var array = @Html.Raw(Json.Encode(ViewBag.Cities));
                if (val) {
                    var records=   array.filter(p=>p.CountryId==val);
                    if(records.length>0){

                        for (var i = 0; i < records.length; i++) {
                            $("#City").append("<option value="+records[i].CityId+">"+records[i].Name+" </option>") 

                        }
                        $("#City").val('@Model.City');
                    }
                }
        }


    </script>
}